<style>
  .checkingame.vcomp .page-body {
    width: 100%;
    height: 100%;
    background: lightpink;
  }

  /* .research.vcomp .page-body > .spinner {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 30px;
    background: white;
    color: var(--color-dark);
  }
 */

  .checkingame.vcomp .page-body > .closer {
   position: absolute;
   bottom: 0;
   right: 0;
   width: 45px;
   height: 45px;
   display: flex;
   justify-content: center;
   align-items: center;
  }

  .checkingame.vcomp .page-body > .closer > img {
   width: 12px;
   height: 12px;
   object-fit: cover;
  }
</style>


<script type='text/x-template' id='checkingame-template'>
  <page
    class='checkingame vcomp'
    :order='session.page.checkingame.order'
    :open='session.page.checkingame.open'
    :from='session.page.checkingame.from'
    :hide_close='true'
    :hide_menu='true'
    :hide_headerbar='true'
    :trans_headerbar='true'
    @close='session.close_page()'>

    <template #page-body>
      <researchitem
        v-if='researchitem'
        :researchitem='researchitem'
        :session='session'
      ></researchitem>

      <div class='closer' @click='session.close_page()'>
        <img src='/static/materials/icons/icon_x.png'>
      </div>

      <!-- <div class='spinner' v-if='onloading'>
        <i class="fa fa-spinner fa-spin"></i>
      </div> -->
    </template>
  </page>
</script>


<script>
  Vue.component('checkingame', {
    template: '#checkingame-template',
    delimiters: ['[[', ']]'],
    props: ['session'],
    data: function() {
      return {
        default_gender: 'F',
        onloading: true
      }
    },

    computed: {
      researchitem: function() {
        return this.session.page.checkingame.researchitem
      },

      boo: function() {
        if (this.session.user.has_auth) {
          return this.session.user.boo
        }
      },

      genderlabels: function() {
        if (this.boo) {
          return this.boo.genderlabels
        }
      },

      gender: function() {
        if (this.genderlabels) {
          if ((this.genderlabels.length == 0) || (this.genderlabels.length == 2)) {
            return this.default_gender

          } else if ((this.genderlabels.length == 1) && (this.genderlabels.includes(1))) {
            return 'M'

          } else if ((this.genderlabels.length == 1) && (this.genderlabels.includes(2))) {
            return 'F'

          } else {
            return this.default_gender
          }
        } else {
          return this.default_gender
        }
      }
    }
  });
</script>
