<style>
  .oxer.vcomp {
    position: relative;
    width: 100%;
    height: 100%;
    background: none;
  }

  .oxer.vcomp * {
    font-family: 'Montserrat', sans-serif;
  }

  .oxer.vcomp > .oxkey {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .oxer.vcomp > .oxkey.devoted {
    opacity: 0.2;
  }

  .oxer.vcomp > .oxkey > img {
    position: absolute;
    left: 50%;
    top: var(--w-4);
    height: var(--w-32);
    width: var(--w-32);
    object-fit: contain;
    transform: translateX(-50%);
  }

  .oxer.vcomp > .oxkey > .score {
    position: absolute;
    top: var(--w-20);
    left: 50%;
    transform: translate(-50%,-50%);
    font-size: var(--w-20);
    -webkit-text-stroke: 2px white;
    color: var(--color-dark);
  }
</style>

<script type='text/x-template' id='oxer-template'>
  <div class='oxer vcomp'>

    <div class='oxkey' :class='phase'>
      <img :src='ox_src'>
      <div class='score' v-if='is_active'>[[ score ]]</div>
    </div>

  </div>
</script>


<script>
  Vue.component('oxer', {
    template: '#oxer-template',
    delimiters: ['[[', ']]'],
    props: [ 'act', 'vote_state', 'score', 'editable', 'is_active', 'keyvalue' ],
    data: function() {
      return {}
    },

    computed: {
      phase: function() {
        if (this.is_active) {
          if (this.vote_state == this.act) {
            return 'voted'
          } else {
            return 'devoted'
          }
        }
      },

      ox_src: function() {
        if (this.keyvalue=='O' || this.keyvalue=='ì‚´') {
          return '/static/materials/icons/moiber_letter_o.png'

        } else {
          return '/static/materials/icons/moiber_letter_x.png'
        }
      }
    }
  });
</script>
